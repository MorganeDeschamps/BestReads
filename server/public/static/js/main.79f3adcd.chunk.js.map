{"version":3,"sources":["components/Navbar/Navbar.jsx","services/ebook.services.js","pages/ebooks/CreateEbook.page.jsx","utils/consts.js","services/auth.js","pages/Home.page.js","pages/authPages/Signup.jsx","utils/paths.js","pages/authPages/LogIn.page.jsx","services/api.services.js","images/default.jpeg","services/shelves.services.js","components/DropdownButton/DropdownButton.js","pages/search/SearchResults.page.js","components/Loading/index.jsx","pages/search/Search.page.js","routing-components/NormalRoute.jsx","routing-components/ProtectedRoute.jsx","components/PrivateShelves/NewDynamicShelf.js","components/PublicShelves/NewDynamicPubShelf.js","components/Book/BookEbook.jsx","pages/publicBS/PublicBookShelf.page.js","pages/privateBS/PrivateBookshelf.page.js","pages/UserProfile.page.js","services/review.services.js","components/Reviews/NewReview.jsx","components/Book/BookDetails.jsx","pages/ebooks/Read.page.js","App.js","index.js"],"names":["Navbar","props","user","useState","navbarOpen","setNavbarOpen","closeMenu","className","to","onClick","prev","style","color","width","height","activeClassName","handleLogout","internalServerError","err","status","errorMessage","successStatus","res","data","service","axios","create","baseURL","process","CreateEbook","shelf","privateBookshelf","shelves","find","name","initialState","title","author","coverUrl","ebookUrl","owner","_id","formData","setFormData","notify","message","toast","warning","position","autoClose","hideProgressBar","closeOnClick","pauseOnHover","draggable","progress","undefined","error","handleChange","event","target","value","console","log","onSubmit","ebookDetails","preventDefault","post","then","catch","htmlFor","id","type","placeholder","onChange","required","window","cloudinary","createUploadWidget","cloudName","uploadPreset","cropping","result","info","secure_url","getCoverUrl","open","getEbookUrl","map","ACCESS_TOKEN","APP_NAME","toUpperCase","slice","toLowerCase","authService","getLoggedIn","get","headers","Authorization","localStorage","getItem","CONSTS","HomePage","src","alt","Signup","username","email","password","imageUrl","credentials","setItem","accessToken","authenticate","history","push","minLength","LogIn","login","URITemplate","require","main","mainSearch","search","notEmpty","Object","entries","filter","backToObj","fromEntries","searchOptions","searchUrl","expand","q","buildUrl","getOneBook","olid","url","publicService","withCredentials","privateService","saveToPublic","book","put","DropdownButton","publicBookshelf","selected","disabled","SearchResults","results","cover","backgroundImage","backgroundRepeat","backgroundPosition","backgroundSize","eachDoc","Default","LoadingComponent","Search","subject","place","person","language","publisher","searchState","setSearch","toggle","setToggle","loading","setLoading","setResults","handleSubmit","apiSearches","docs","eachWork","author_name","key","replace","olLink","cover_edition_key","href","e","NormalRoute","exact","path","component","componentProps","Component","render","ProtectedRoute","CreatePrivateShelf","appendToShelf","updateUser","ebooks","formState","setFormState","form","dynamicShelves","CreatePublicShelf","appendToPubShelf","books","BookEbook","bookshelf","action","bsType","toDo","args","bookId","shelfId","deleteBook","delete","movePrivate","eBookReader","top","right","bottom","left","coverFlip","shelfFrom","shelfTo","label","PublicBookShelf","publicShelf","bookshelfState","setState","useEffect","length","eachBook","PrivateBookShelf","privateShelf","UserBookShelves","setUser","setPublicBookshelf","setPrivateBookshelf","reviews","setPublicBS","setPrivateBS","NewReview","match","params","initialFormState","comment","rating","ratingSelect","createReview","review","rows","BookDetails","bookState","reviewState","setReviewState","dbReviews","eachComment","Reader","ebookId","ebook","setEbook","getEbookDetails","location","locationChanged","epubcifi","App","removeItem","UserProfile","ReactDOM","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.79f3adcd.chunk.js","sourcesContent":["import React, {useState} from 'react';\nimport { Link } from 'react-router-dom';\nimport { MdClose } from \"react-icons/md\"\nimport { FiMenu } from \"react-icons/fi\"\nimport './Navbar.css';\n\n\nconst Navbar = (props) => {\n\tconst {user} = props\n\tconst [navbarOpen, setNavbarOpen] = useState(false)\n\tconst handleToggle = () => {\n\t\tsetNavbarOpen(prev => !prev)\n\t}\n\tconst closeMenu = () => {\n\t\tsetNavbarOpen(false)\n\t}\n\n\treturn (\n\t\t<nav className=\"navBar\">\n\t\t\t<div className=\"header\">\n\t\t\t\t<Link to='/' className='homeLogo'>Best Reads</Link>\n\t\t\t</div>\n\t\t\t<button onClick={handleToggle}>\t\t\t\n  \t\t\t\t{navbarOpen ? (\n    \t\t\t<MdClose style={{ color: \"#fff\", width: \"40px\", height: \"40px\" }} />\n  \t\t\t\t) : (\n    \t\t\t<FiMenu style={{ color: \"#7b7b7b\", width: \"40px\", height: \"40px\" }} />\n  \t\t\t\t)}\n\t\t\t</button>\n\t\t\t<div className='nav__authLinks'>\n\t\t\t{props.user ? (\n\t\t\t\t<>\n\t\t\t\t<ul className={`menuNav ${navbarOpen ? \" showMenu\" : \"\"}`}>\n\t\t\t\t\t<li><Link to='/' activeClassName='homebutton' onClick={() => closeMenu()}>Home</Link></li>\n\n\t\t\t\t\t<li><Link to='/search' activeClassName=\"active-link\" onClick={() => closeMenu()}>Searchbook</Link></li>\n\n\t\t\t\t\t<li><Link to='/ebook/create' activeClassName='authLink' onClick={() => closeMenu()}>Create an eBook</Link></li>\n\n\t\t\t\t\t<li><Link to=\"/auth/profile/user\" activeClassName='authLink' onClick={() => closeMenu()}>User page</Link></li>\n\n\t\t\t\t\t<li><Link to=\"/review/test\" activeClassName='authLink' onClick={() => closeMenu()}>Review</Link></li>\n\n\t\t\t\t\t<li><Link className='nav-logoutbtn' onClick={props.handleLogout}>Logout</Link></li>\n\t\t\t\t</ul>\n\t\t\t\t</>\n\t\t\t\t) : (\n\t\t\t\t<>\n\t\t\t\t<ul className={`menuNav ${navbarOpen ? \" showMenu\" : \"\"}`}>\n\t\t\t\t\t<li><Link to='/' \tclassName='authLink' onClick={() => closeMenu()}>Home</Link></li>\n\t\t\t\t\t<li><Link to='/auth/signup' activeClassName='authLink' onClick={() => closeMenu()}>Signup</Link></li>\n\n\t\t\t\t\t<li><Link to='/auth/login' className='authLink' onClick={() => closeMenu()}>Log In</Link></li>\n\n\t\t\t\t</ul>\n\t\t\t\t</>\n\t\t\t\t\n\t\t\t\t)}\n\t\t\t</div> \n\t\t</nav>\n\t\t\n\t\t\t\n\n\t\t\t\t\n\t\t\t\n\t\t\t\n\t\t\t\n\t\t\n\t\t\t\n\n\t\t\n\n\t);\n};\n\n\n\nexport default Navbar;\n\n","import axios from 'axios';\n\nfunction internalServerError(err) {\n\treturn {\n\t\tstatus: false,\n\t\terrorMessage: 'Internal server error. Please check your server'\n\t};\n}\n\nfunction successStatus(res) {\n\treturn {\n\t\tstatus: true,\n\t\tdata: res.data\n\t};\n}\n\n// creates a basic url for every request in this file\nconst service = axios.create({\n\tbaseURL: `${process.env.REACT_APP_SERVER_URL}/ebook`\n});\n\n\n//form needs  { title, author, coverUrl, ebookUrl, owner, shelfId}\nexport function createEbook(ebookDetails) {\n    return service.post(\"/create\", ebookDetails)\n    .then(successStatus)\n    .catch(internalServerError)\n}\n\nexport function getEbookDetails(ebookId) {\n    return service.get(`/getBook/${ebookId}`)\n    .then(successStatus)\n    .catch(internalServerError)\n}\n\nexport function editEbook(id, form) {\n    return service.put(`/edit/${id}`, form)\n    .then(successStatus)\n    .catch(internalServerError)\n}\n\nexport function deleteEbook(id) {\n    return service.delete(`/delete/${id}`)\n    .then(successStatus)\n    .catch(internalServerError)\n}\n","import React, { useEffect, useState } from 'react';\nimport { ToastContainer, toast } from 'react-toastify';\nimport 'react-toastify/dist/ReactToastify.css';\nimport {createEbook} from \"../../services/ebook.services\"\n\n\nfunction CreateEbook(props) {\n\t//form needs  { title, author, coverUrl, ebookUrl, owner, shelfId}\n\tconst user = props.user\n\tconst shelf = user.privateBookshelf.shelves.find(shelf => shelf.name === \"Main shelf\")\n\n\tconst initialState = {\n\t\ttitle: \"\",\n\t\tauthor: \"\",\n\t\tcoverUrl: \"\",\n        ebookUrl: \"\", \n\t\towner: user._id,\n\t\tshelf: shelf._id\n\t};\n\n\tconst [formData, setFormData] = useState(initialState);\n\tconsole.log(\"test: \", formData)\n\n\t//COVER IMAGE WIDGET\n\tfunction getCoverUrl(result) {\n\t\tif(result.event === \"success\") {\n\t\t\tsetFormData({...formData, coverUrl: result.info.secure_url})\n\t\t}\n\t}\n\n\tfunction widgetCover(event){ \n\n\t\twindow.cloudinary.createUploadWidget({ \n\t\tcloudName: \"best-reads\", \n\t\tuploadPreset: \"bestReads-bookCovers\",\n\t\tcropping: true\n\t\t}, (error, result) => {getCoverUrl(result)}).open()\n\t}\n\n\n\n\t//EBOOK FILE WIDGET\n\tfunction getEbookUrl(result) {\n\t\tif(result.event === \"success\") {\n\t\t\tsetFormData({...formData, ebookUrl: result.info.secure_url})\n\t\t}\n\t}\n\n \tfunction widgetEbooks(event) {\n\t\twindow.cloudinary.createUploadWidget({ \n\t\t\t cloudName: \"best-reads\", \n\t\t\t uploadPreset: \"bestReads-ebooks\" \n\t\t}, (error, result) => {getEbookUrl(result)}).open()\n\n\t}\n\n\n\n\n\tfunction notify(status, message) {\n\t\tif(status === \"success\") toast.warning(message, {\n\t\t\tposition: \"top-right\",\n\t\t\tautoClose: 3000,\n\t\t\thideProgressBar: true,\n\t\t\tcloseOnClick: true,\n\t\t\tpauseOnHover: true,\n\t\t\tdraggable: true,\n\t\t\tprogress: undefined,\n\t\t})\n\t\telse toast.error(message, {\n\t\t\tposition: \"top-right\",\n\t\t\tautoClose: 3000,\n\t\t\thideProgressBar: true,\n\t\t\tcloseOnClick: true,\n\t\t\tpauseOnHover: true,\n\t\t\tdraggable: true,\n\t\t\tprogress: undefined,\n\t\t})\n\t}\n\n\n\n\tfunction success() {\n\t\tsetFormData(initialState)\n\t\tnotify(\"success\", \"Your Ebook was added to your bookshelf!\")\n\t}\n\t\n\n\tfunction handleChange(event) {\n\t\tconst {name, value} = event.target\n        setFormData({...formData, [name]: value})\n\t}\n\n\tfunction handleSubmit(event) {\n\t\tevent.preventDefault()\n\t\tcreateEbook(formData).then(res => res.status === true ? success() : notify(\"error\", \"There was an issue creating your Ebook\") )\n\t}\n\n\n\treturn (\n\t\t<div>\n\t\t\t<ToastContainer/>\n\t\t\t<h1>Create book: </h1>\n\t\t\t<form onSubmit={handleSubmit} className='new-book-form'>\n\t\t\t\t<label htmlFor='input-title'>Title</label><br />\n\t\t\t\t<input\n\t\t\t\t\tid='input-title'\n\t\t\t\t\ttype='text'\n\t\t\t\t\tname='title'\n\t\t\t\t\tplaceholder='Text'\n\t\t\t\t\tvalue={formData.title}\n\t\t\t\t\tonChange={handleChange}\n\t\t\t\t\trequired\n\t\t\t\t/>\n\t\t\t\t<br /><br />\n\t\t\t\t<label htmlFor='input-author'>Author</label><br />\n\t\t\t\t<input\n\t\t\t\t\tid='input-authot'\n\t\t\t\t\ttype='text'\n\t\t\t\t\tname='author'\n\t\t\t\t\tplaceholder='Text'\n\t\t\t\t\tvalue={formData.author}\n\t\t\t\t\tonChange={handleChange}\n\t\t\t\t\trequired\n\t\t\t\t/>\n\t\t\t\t<br /><br />\n\t\t\t\t<label htmlFor='input-cover'>Cover</label><br />\n\t\t\t\t<input type=\"button\" className=\"cloudinary-button\" onClick={widgetCover} value=\"Add a cover\"/>\n\n\t\t\t\t<br /><br />\n\t\t\t\t<label htmlFor='input-ebook'>Ebook file</label><br />\n\t\t\t\t<input type=\"button\" className=\"cloudinary-button\" onClick={widgetEbooks} value=\"Add an ebook file\"/>\n\n\t\t\t\t<br /><br />\n\t\t\t\t<label htmlFor=\"input-bookshelf\">Add to: </label>\n\t\t\t\t<select onChange={(event) => setFormData({...formData, shelf: event.target.value})}>\n\t                  {user.privateBookshelf.shelves.map(shelf => <option name=\"shelf\" value={shelf._id}>{shelf.name}</option>)}\n\t\t\t\t</select>\n \n\t\t\t\t<br /><br />\n\t\t\t\t<button className='button__submit' type='submit'>\n\t\t\t\t\tSubmit\n\t\t\t\t</button>\n\t\t\t</form>\n\t\t</div>\n\t);\n}\n\nexport default CreateEbook;\n","export const ACCESS_TOKEN = \"access_token\";\nconst APP_NAME = \"newapp\";\nexport const CAPITALIZED_APP =\n  APP_NAME[0].toUpperCase() + APP_NAME.slice(1).toLowerCase();\n","import axios from 'axios';\nimport * as CONSTS from '../utils/consts';\n\n// here we are just maing our code look more DRY. With every backend call we must deal with errors and success states. The idea of creating these kinds of services is to make our lives easier in the components\nfunction internalServerError(err) {\n\treturn {\n\t\tstatus: false,\n\t\terrorMessage: 'Internal server error. Please check your server'\n\t};\n}\n\nfunction successStatus(res) {\n\tconsole.log(\"success: \", res)\n\treturn {\n\t\tstatus: true,\n\t\tdata: res.data\n\t};\n}\n\n// creates a basic url for every request in this file\nconst authService = axios.create({\n\tbaseURL: `${process.env.REACT_APP_SERVER_URL}/auth`\n});\n\nexport function login(credentials) {\n\treturn authService\n\t\t.post('/login', credentials)\n\t\t.then(successStatus)\n\t\t.catch(internalServerError);\n}\n\nexport function getLoggedIn() {\n\treturn authService\n\t\t.get(`/session`, {\n\t\t\theaders: {\n\t\t\t\tAuthorization: localStorage.getItem(CONSTS.ACCESS_TOKEN)\n\t\t\t}\n\t\t})\n\t\t.then(successStatus)\n\t\t.catch(internalServerError);\n}\n\n\nexport function signup(credentials) {\n\treturn authService\n\t\t.post('/signup', credentials)\n\t\t.then(successStatus)\n\t\t.catch(internalServerError);\n}\n\nexport function logout() {\n\treturn authService\n\t\t.delete('/logout', {\n\t\t\theaders: {\n\t\t\t\tAuthorization: localStorage.getItem(CONSTS.ACCESS_TOKEN)\n\t\t\t}\n\t\t})\n\t\t.then(successStatus)\n\t\t.catch(internalServerError);\n}\n\nexport function getUser() {\n\n\treturn authService.get(`/session`, {headers: {Authorization: localStorage.getItem(CONSTS.ACCESS_TOKEN)}})\n\t.then((result) => {\n\t\tif (!result.data) {\n\t\t\tconsole.log('RES IN CASE OF FAILURE', result);\n\t\t\treturn null ;\n\t\t} else {\n\t\t\treturn result.data.user\n\t\t}\n\t}).catch((err) => console.log(\"error with getuser\", err))\n}\n\n\n\n\n\n\n\n\n/* ************ BOOKSHELF, need to create new file *********/\n\nexport function displayUserPage(userId) {\n\treturn authService\n\t\t.post(`/profile/user`, userId)\n\t\t.then(successStatus)\n\t\t.catch(internalServerError);\n}","import React from 'react'\nimport { Link } from 'react-router-dom';\nimport \"../App.css\"\nimport '../components/Navbar/Navbar.css'\n\n\nfunction HomePage() {\n  return (\n    // component for user profile - make sure call props\n    <div className=\"home\">\n      <div className=\"home-img-container\">\n        <img src=\"https://64.media.tumblr.com/11e061c672d56b817484963145163de9/912682de92279e4a-1a/s640x960/24725567374df17623ffe72b92965a9a711bd229.gifv\" alt=\"\" className=\"img-home\"/>\n        \n        <div className=\"home-headings\">\n          <Link to={'/search'} className=\"tag center\">A NOVEL IDEA</Link>\n          <p className=\"quote center\">\"At least we're not Amazon\"</p>\n        </div>\n      </div>\n    </div>\n  );\n}\n\nexport default HomePage;\n","import React, { useState } from 'react';\nimport { signup } from '../../services/auth';\nimport './auth.css';\nimport * as CONSTS from '../../utils/consts';\nimport * as PATHS from '../../utils/paths';\nimport HomePage from '../Home.page';\nimport '../../utils/Forms.css'\nimport { Link } from 'react-router-dom';\n\n\nfunction Signup(props) {\n\t//const { authenticate } = props;\n\n\tconst initialState = {\n\t\tusername: '',\n\t\temail: '',\n\t\tpassword: '',\n\t\timageUrl: \"\"\n\t};\n\n\tconst [formData, setFormData] = useState(initialState);\n\n\tconst handleChange = (event) => {\n\t\tconst { name, value } = event.target;\n\t\tsetFormData({\n\t\t\t...formData,\n\t\t\t[name]: value\n\t\t});\n\t};\n\n\n\tconst handleSubmit = (event) => {\n\t\tevent.preventDefault();\n\n\t\tsignup(formData).then((res) => {\n\t\t\t// successful signup\n\t\t\tif (!res.data) {\n\t\t\t\tconsole.log('error');\n\t\t\t}\n\t\t\telse {\n\t\t\tlocalStorage.setItem(CONSTS.ACCESS_TOKEN, res.data.accessToken);\n\t\t\tprops.authenticate(res.data.user);\n\t\t\tprops.history.push(PATHS.HOMEPAGE);\n\t\t\t}\n\t\t});\n\n\t};\n\n\treturn (\n\t\t<div className=\"page-container\">\n\t\t\t<HomePage />\n\t\t\t<div className=\"signup-form-container\">\n\t\t\t\t<h1>Sign Up</h1>\n\t\t\t\t<p className=\"account\">Account? <Link to=\"/auth/login\" className=\"account\">Log In</Link></p>\n\t\t\t\t<form onSubmit={handleSubmit} className=\"login-form\">\n\t\t\t\t\t<div className=\"inputs\">\n\t\t\t\t\t\t<label htmlFor='login-form-text'>Username</label>\n\t\t\t\t\t\t<input\n\t\t\t\t\t\t\ttype='text'\n\t\t\t\t\t\t\tname='username'\n\t\t\t\t\t\t\tplaceholder='Username'\n\t\t\t\t\t\t\tvalue={formData.username}\n\t\t\t\t\t\t\tonChange={handleChange}\n\t\t\t\t\t\t\trequired\n\t\t\t\t\t\t/>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div className=\"inputs\">\n\t\t\t\t\t\t<label htmlFor='login-form-text'>Email</label>\n\t\t\t\t\t\t<input\n\t\t\t\t\t\t\ttype='text'\n\t\t\t\t\t\t\tname='email'\n\t\t\t\t\t\t\tplaceholder='Email'\n\t\t\t\t\t\t\tvalue={formData.email}\n\t\t\t\t\t\t\tonChange={handleChange}\n\t\t\t\t\t\t\trequired\n\t\t\t\t\t\t/>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div className=\"inputs\">\n\t\t\t\t\t\t<label htmlFor='login-form-text'>Password</label>\n\t\t\t\t\t\t<input\n\t\t\t\t\t\t\ttype='password'\n\t\t\t\t\t\t\tname='password'\n\t\t\t\t\t\t\tplaceholder='Password'\n\t\t\t\t\t\t\tvalue={formData.password}\n\t\t\t\t\t\t\tonChange={handleChange}\n\t\t\t\t\t\t\trequired\n\t\t\t\t\t\t\tminLength='8'\n\t\t\t\t\t\t/>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div className=\"inputs\">\n\t\t\t\t\t\t<button className='button__submit' type='submit'>Submit</button>\n\t\t\t\t\t</div>\n\t\t\t\t</form>\n\t\t\t</div>\n\t\t</div>\n\t);\n}\n\nexport default Signup;\n","export const HOMEPAGE = \"/\";\nexport const SIGNUPPAGE = \"/auth/signup\";\nexport const LOGINPAGE = \"/auth/login\";\nexport const PROTECTEDPAGE = \"/protected\";\n","import React, { useState } from 'react';\nimport { login } from '../../services/auth';\nimport './Signup';\nimport * as CONSTS from '../../utils/consts';\nimport HomePage from '../Home.page';\nimport '../../utils/Forms.css'\nimport { Link } from 'react-router-dom';\n\n\nfunction LogIn(props) {\n\tconst { authenticate } = props;\n\tif(props.user && props.user._id) { props.history.push(\"/\")} \n\n\tconst initialState = {\n\t\tusername: '',\n\t\tpassword: ''\n\t};\n\n\tconst [formData, setFormData] = useState(initialState);\n\n\tconst handleChange = (event) => {\n\t\tconst { name, value } = event.target;\n\t\tsetFormData({\n\t\t\t...formData,\n\t\t\t[name]: value\n\t\t});\n\t};\n\n\tconst handleSubmit = (event) => {\n\t\tevent.preventDefault();\n\n\t\tconst credentials = {\n\t\t\tusername: formData.username,\n\t\t\tpassword: formData.password\n\t\t};\n\n\t\tlogin(credentials).then((res) => {\n\t\t\tif (!res.data) {\n\t\t\t\tconsole.log('error', res);\n\t\t\t} else {\n\t\t\tlocalStorage.setItem(CONSTS.ACCESS_TOKEN, res.data.accessToken);\n\t\t\tauthenticate(res.data.user);\n\t\t\tprops.history.push('/');\n\t\t\t}\n\t\t});\n\t};\n\n\treturn (\n\t\t<div className=\"page-container\">\n\t\t\t<HomePage />\n\t\t\t<div className=\"login-form-container\">\n\t\t\t\t<h1>Log In</h1>\n\t\t\t\t<p className=\"account\">No account? <Link to=\"/auth/signup\" className=\"account\">Sign Up</Link></p>\n\t\t\t\t<form onSubmit={handleSubmit} className=\"login-form\">\n\t\t\t\t\t<div className=\"inputs\">\n\t\t\t\t\t\t<label htmlFor='login-form-text'>Username</label>\n\t\t\t\t\t\t<input\n\t\t\t\t\t\ttype='text'\n\t\t\t\t\t\tname='username'\n\t\t\t\t\t\tplaceholder='Username'\n\t\t\t\t\t\tvalue={formData.username}\n\t\t\t\t\t\tonChange={handleChange}\n\t\t\t\t\t\trequired\n\t\t\t\t\t\t/>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div className=\"inputs\">\n\t\t\t\t\t\t<label htmlFor='login-form-text'>Password</label>\n\t\t\t\t\t\t<input\n\t\t\t\t\t\t\ttype='password'\n\t\t\t\t\t\t\tname='password'\n\t\t\t\t\t\t\tplaceholder='Password'\n\t\t\t\t\t\t\tvalue={formData.password}\n\t\t\t\t\t\t\tonChange={handleChange}\n\t\t\t\t\t\t\trequired\n\t\t\t\t\t\t\tminLength='8'\n\t\t\t\t\t\t/>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div className=\"inputs\">\n\t\t\t\t\t\t<button className='login-form-text' type='submit'>Submit</button>\n\t\t\t\t\t</div>\n\t\t\t\t</form>\n\t\t\t</div>\n\t\t</div>\n\t);\n}\n\nexport default LogIn;\n","import axios from 'axios';\nlet URI = require('urijs');\nlet URITemplate = require('urijs/src/URITemplate');\n\n\n\nexport const main = new URITemplate(`https://openlibrary.org/search.json{?q*}&limit=50`)\nexport const subSearch = new URITemplate(`https://openlibrary.org/search/{subSearch}.json{?q*}`)\n//works for authors and subjects\n\n\n\nconst urlbase = axios.create({\n    baseURL: `https://openlibrary.org`,\n})\n\n\nfunction buildUrl(searchOptions) {\n\n    let searchUrl = main.expand({\n        q: {...searchOptions}\n    })\n    console.log(\"url is:\", searchUrl)\n    return searchUrl\n}\n\n\nfunction internalServerError(err) {\n\treturn {\n\t\tstatus: false,\n\t\terrorMessage: 'Error while querying the API. Please check your server'\n\t};\n}\n\nfunction successStatus(res) {\n\treturn {\n\t\t//status: true,\n\t\tdata: res.data\n\t};\n}\n\n\nexport function mainSearch(search) {\n    const asArray = Object.entries(search);\n    const notEmpty = asArray.filter(([key, value]) => value !== \"\");\n    const backToObj = Object.fromEntries(notEmpty);\n\n    return axios.get(buildUrl(backToObj))\n    .then(successStatus)\n    .catch(internalServerError)\n\n}\n\n\nexport function getAuthorDetails(key) {\n    const url = `/authors/${key}.json`\n\n    return urlbase.get(url)\n    .then(successStatus)\n    .catch(internalServerError)\n}\n\n\n\nexport function getWorks(key) {\n    const url = `/authors/${key}/works.json`\n\n    return urlbase.get(url)\n    .then(successStatus)\n    .catch(internalServerError)\n}\n\n\nexport function getOneBook(olid) {\n    const url = `https://openlibrary.org/books/${olid}.json`\n\n    return axios.get(url)\n    .then(res => {return res.data})\n    .catch(err => console.log(\"Error getting a book from: \", url, \" ---Error: \", err))\n\n}\n","export default __webpack_public_path__ + \"static/media/default.b508dd32.jpeg\";","import axios from 'axios';\n\n\n\n\nfunction internalServerError(err) {\n\treturn {\n\t\tstatus: false,\n\t\terrorMessage: 'Internal server error. Please check your server'\n\t};\n}\n\nfunction successStatus(res) {\n\tconsole.log(\"shelves services success!\", res)\n\treturn {\n\t\tstatus: true,\n\t\tdata: res.data\n\t};\n}\n\n\n// Basic url for every request in this file\nconst publicService = axios.create({\n\tbaseURL: `${process.env.REACT_APP_SERVER_URL}/public-shelves`,\n    withCredentials: true\n});\n\n\nconst privateService = axios.create({\n\tbaseURL: `${process.env.REACT_APP_SERVER_URL}/private-shelves`,\n    withCredentials: true\n});\n\n\n//PUBLIC\n\n\n\nexport function saveToPublic(shelf, book) {\n\tconst info = {shelf: shelf, book: book}\n\n\treturn publicService.put(`addBook`, info)\n\t.then(successStatus)\n\t.catch(internalServerError)\n\n}\n\nexport function movePublic(info) {\n\t//const {shelfFrom, shelfTo, book} = req.body\n\treturn publicService.put(`/moveBook`, info)\n\t.then(successStatus)\n\t.catch(internalServerError)\n\n\n}\n\nexport function deleteBook(shelfId, bookId) {\n\treturn publicService.put(\"/deleteBook\", {shelfId, bookId})\n\t.then(successStatus)\n\t.catch(internalServerError)\n}\n\n\nexport function getPublicShelf(shelfId) {\n\treturn publicService\n\t.get(`/${shelfId}`)\n\t.then(successStatus)\n\t.catch(internalServerError)\n}\n\n\nexport function newPublicShelf(form) {\n\t//form needs {name, ebooks, publicBookshelf}\n\treturn publicService\n\t\t.post(`/create`, form)\n\t\t.then(successStatus)\n\t\t.catch(internalServerError);\n}\n\nexport function editPublicShelf(shelfId, name) {\n\treturn publicService\n\t\t.put(`/${shelfId}/edit`, name)\n\t\t.then(successStatus)\n\t\t.catch(internalServerError);\n}\n\n\n\n\n\n\n\n// PRIVATE\nexport function movePrivate(info) {\n\t//form needs {shelfFrom, shelfTo, book} \n\treturn privateService.put(`/moveBook`, info)\n\t.then(successStatus)\n\t.catch(internalServerError)\n}\n\nexport function getPrivateShelf(shelfId) {\n\treturn privateService\n\t.get(`/${shelfId}`)\n\t.then(successStatus)\n\t.catch(internalServerError)\n}\n\nexport function newPrivateShelf(form) {\n\t//form needs {name, privateBookshelf}\n\treturn privateService\n\t.post(`/create`, form)\n\t.then(successStatus)\n\t.catch(internalServerError);\n}\n\nexport function editPrivateShelf(shelfId, name) {\n\t//form needs {name}\n\treturn privateService\n\t.put(`/${shelfId}/edit`, name)\n\t.then(successStatus)\n\t.catch(internalServerError);\n}\n\n","import React, { useState, useEffect } from 'react';\nimport { saveToPublic } from \"../../services/shelves.services\"\n\nexport default function DropdownButton (props) {\n    const {user} = props\n    const {book} = props\n    const {search} = props\n    const {type} = props\n\n    const shelves = user.publicBookshelf.shelves\n\n\n/*     function moveShelf() {\n\n        return(\n            <div className=\"book-shelf-changer\">\n            <select onChange={(event) => action(props.bsType, event.target.value, {shelfFrom: props.shelf, shelfTo: event.target.value, bookId: book._id}).then(res => res.status === true ? updateUser() : console.log(res))}>\n            \n            <optgroup label=\"Move to:\"></optgroup>\n                {shelves.map(shelf => <option value={shelf._id}>{shelf.name}</option>)}\n            \n            <optgroup label=\"--------\"></optgroup>\n            <option value=\"delete\" >Delete</option>\n            \n            {(props.bsType === \"private\") && <option value=\"edit\">Edit</option>}\n            </select>\n            </div>\n\n        )\n    }\n */\n    function saveTo() {\n\n        return(\n            <select onChange={(event) => saveToPublic(event.target.value, book)}>\n            <option selected disabled>Save to: </option>\n            {shelves.map(shelf => <option value={shelf._id}>{shelf.name}</option>)}\n            </select>\n        )\n\n    }\n\n\n\n    return (\n        <div className=\"book-shelf-changer\">\n\t        <select onChange={(event) => saveToPublic(event.target.value, book)}>\n\t            <option selected disabled>Save to: </option>\n\t            {shelves.map(shelf => <option value={shelf._id}>{shelf.name}</option>)}\n\t            </select>\n\t    </div>\n    )\n}","import Default from \"../../images/default.jpeg\"\nimport DropdownButton from \"../../components/DropdownButton/DropdownButton\"\n\nexport default function SearchResults(props) {\n\n    const {results} = props\n    console.log(\"props: \", results)\n\n\tconst {user} = props\n    const shelves = user.publicBookshelf.shelves\n\tconsole.log('these are the shelves', user)\n\n\tfunction style(cover) {\n\t\treturn {\n\t\tbackgroundImage: `url(${cover})`,\n\t\tbackgroundRepeat: \"no-repeat\",\n\t\tbackgroundPosition: \"center\",\n\t\tbackgroundSize: \"cover\"\n\t\t}\n\t}\n\n\n    function checkThumbnailExists(book) {\n\t\tif (book.coverUrl) {\n\t\t\treturn (\n\t\t\t\t<div className=\"book-cover\" key={book.coverUrl} style={style(book.coverUrl)} alt=\"book cover\"></div>\n\t\t\t)\n\t\t} else {\n            return ( \n\t\t\t\t<div className=\"book-cover\" style={style(Default)} alt=\"book cover\"></div>\n            )\n        }\n\t}\n \n\n    return(\n        <div className=\"bookshelf\">\n\t        <div className=\"bookshelf-books\">\n\t            <ol className=\"books-grid\">\n                    {results.map(eachDoc => \n                        <div key={eachDoc.id} className=\"book\">\n\t                        <div className=\"book-top\">\n\t                        { checkThumbnailExists(eachDoc) }\n\t\t\t\t\t\t\t<DropdownButton book={eachDoc} user={user} search={true} type={\"book\"} />\n\t                        </div>\n\t                        <div className=\"book-title\" key={eachDoc.title}>{eachDoc.title}</div>\n\t                        <div className=\"book-author\" key={eachDoc.author}>{eachDoc.author}</div>\n                        </div>\n                    )}\n                </ol>\n\t        </div>\n\t    </div>\n\n    )\n\n}","import React from \"react\";\nimport \"./Loading.css\";\n\nconst LoadingComponent = () => {\n  return (\n    <div className=\"wrapper\">\n      <div className=\"spinner\">\n        <div className=\"bounce1\"></div>\n        <div className=\"bounce2\"></div>\n        <div className=\"bounce3\"></div>\n      </div>\n    </div>\n  );\n};\n\nexport default LoadingComponent;\n","import * as apiSearches from \"../../services/api.services\"\nimport { useEffect, useState } from 'react';\nimport SearchResults from \"./SearchResults.page\";\nimport Loading from \"../../components/Loading/index\"\n\n\nfunction Search(props) {\n\n    const emptySearch = {q:\"\", title:\"\", author:\"\", subject:\"\", place:\"\", person:\"\", language:\"\", publisher:\"\"}\n    const [searchState, setSearch] = useState(emptySearch)\n    const [toggle, setToggle] = useState(false)\n    const [loading, setLoading] = useState(false)\n\n    const [results, setResults] = useState([])\n\n    function handleChange(event) {\n        const {name, value} = event.target\n        setSearch({...searchState, [name]: value})\n    }\n\n\n\n    function filter(resultsFromApi) {\n      return resultsFromApi.map((eachWork) => {\n      let result = {\n          author: eachWork.author_name,\n          title: eachWork.title,\n          _id: eachWork.key.replace(\"/works/\", \"\"),\n          olLink: `https://openlibrary.org${eachWork.key}`\n      }\n\n      if (eachWork.cover_edition_key) result.coverUrl = `https://covers.openlibrary.org/b/olid/${eachWork.cover_edition_key}-M.jpg`;\n\n      return result \n\n      }) \n    }\n\n\n    function handleSubmit(event) {\n        console.log(\"test\")\n        event.preventDefault()\n        setLoading(true)\n        apiSearches.mainSearch(searchState)\n        .then(res => {setResults(filter(res.data.docs)) ; setLoading(false)})\n        .catch(err => console.log(err))\n    }\n\n    //useEffect(() => console.log(\"results: \", results), [results])\n\n\n  return (\n    <div className=\"search-page\">\n      <form onSubmit={handleSubmit}>\n        <label htmlFor=\"main\">Search: </label>\n        <input type=\"text\" onChange={handleChange} name=\"q\" value={searchState.q} />\n        <button type=\"submit\">Search</button>\n      </form>\n\n        <br />\n      <a href=\"#\" onClick={e => setToggle(!toggle)} > Advanced search</a>\n      <br />\n      <br />\n      <br />\n\n\n      {(toggle) && \n        <div>\n          <form onSubmit={e => {handleSubmit(e) ; setToggle(!toggle)}}>\n            <label htmlFor=\"title\">Title: </label><br />\n            <input type=\"text\" onChange={handleChange} name=\"title\" value={searchState.title} /><br /><br />\n            <label htmlFor=\"title\">Author: </label><br />\n            <input type=\"text\" onChange={handleChange} name=\"author\" value={searchState.author} /><br /><br />\n            <label htmlFor=\"title\">Subject: </label><br />\n            <input type=\"text\" onChange={handleChange} name=\"subject\" value={searchState.subject} /><br /><br />\n            <label htmlFor=\"title\">Place: </label><br />\n            <input type=\"text\" onChange={handleChange} name=\"place\" value={searchState.place} /><br /><br />\n            <label htmlFor=\"title\">Person: </label><br />\n            <input type=\"text\" onChange={handleChange} name=\"person\" value={searchState.person} /><br /><br />\n            <label htmlFor=\"title\">Language: </label><br />\n            <input type=\"text\" onChange={handleChange} name=\"language\" value={searchState.language} /><br /><br />\n            <label htmlFor=\"title\">Publisher: </label><br />\n            <input type=\"text\" onChange={handleChange} name=\"publisher\" value={searchState.publisher} /><br /><br />\n            <button type=\"submit\">Search</button>\n          </form>\n        </div> \n      }\n\n{/*       {(results && results.length > 1) && \n        <SearchResults results={results} user={props.user}/>\n      }\n */}\n\n        {loading ? <Loading /> : <SearchResults results={results} user={props.user}/> }\n\n      </div>\n  );\n}\n\nexport default Search;\n\n\n","import React from \"react\";\nimport { Route } from \"react-router-dom\";\n\n// this kind of component is a `wrapper` around the React router dom Route where we immediately pass every single prop down. Instead of writing things with the render\nconst NormalRoute = ({ exact, to, path, component, ...componentProps }) => {\n  const Component = component;\n  return (\n    <Route\n      exact={exact}\n      path={path || to}\n      render={(props) => <Component {...componentProps} {...props} />}\n    />\n  );\n};\n\nexport default NormalRoute;\n","import React from 'react';\nimport { Route, Redirect } from 'react-router-dom';\n\n// the protected route component must take a user in order to check if the user is authenticated or not. If not moves the user to the login page\nconst ProtectedRoute = ({\n\tuser,\n\texact,\n\tto,\n\tpath,\n\tcomponent,\n\t...componentProps\n}) => {\n\tconst Component = component;\n\tif (!user) {\n\t\treturn <Redirect to={'/auth/login'} />;\n\t}\n\treturn (\n\t\t<Route\n\t\t\texact={exact}\n\t\t\tpath={path || to}\n\t\t\trender={(props) => (\n\t\t\t\t<Component {...componentProps} {...props} user={user} />\n\t\t\t)}\n\t\t/>\n\t);\n};\n\nexport default ProtectedRoute;\n","import React, { useEffect, useState } from 'react'\nimport { Link } from 'react-router-dom'\nimport {newPrivateShelf} from '../../services/shelves.services'\n\n\n// CREATE NEW DYNAMIC SHELF\n\nfunction CreatePrivateShelf(props) {\n\tconst {appendToShelf, updateUser} = props\n\tconsole.log('this is the data', appendToShelf)\n    \n\tconst initialFormState = {\n\t\tname: \"\",\n\t\tebooks: [],\n\t\tprivateBookshelf: \"\"\n\t};\n\n\tconst [formState, setFormState] = useState(initialFormState);\n\n\n\tfunction handleChange(event) {\n        const {name, value} = event.target;\n        setFormState({...formState, [name]: value, privateBookshelf: appendToShelf._id})\n\n\t}\n\n\n\tfunction handleSubmit(event) {\n        event.preventDefault()\n\t\t//setFormState(newShelf)\n\t\treturn newPrivateShelf(formState)\n\t\t.then(shelf => {appendToShelf.dynamicShelves = {...appendToShelf.dynamicShelves, shelf}; updateUser()})\n\t\t.catch(err => console.log(err))\n        \n\t}\n\n\n\treturn (\n\t\t<div>\n\t\t\t<h1>Create Shelf: </h1>\n\t\t\t<form onSubmit={handleSubmit} className='new-shelf-form'>\n\t\t\t\t<label>Name: </label>\n\t\t\t\t<input type='text' name='name' placeholder='Name your new shelf' value={formState.name} onChange={handleChange} required />\n\t\t\t\t<button className='button__submit' type='submit'>\n\t\t\t\t\tSubmit\n\t\t\t\t</button>\n\t\t\t</form>\n\n\t\t</div>\n\t);\n}\n\nexport default CreatePrivateShelf;","import React, { useEffect, useState } from 'react'\nimport { Link } from 'react-router-dom'\nimport {newPublicShelf} from '../../services/shelves.services'\n\n\n// CREATE NEW DYNAMIC SHELF\n\nfunction CreatePublicShelf(props) {\n\tconst {appendToPubShelf, updateUser} = props\n\tconsole.log('this is the data', appendToPubShelf)\n    \n\tconst initialFormState = {\n\t\tname: \"\",\n\t\tbooks: [],\n\t\tpublicBookshelf: \"\"\n\t};\n\n\tconst [formState, setFormState] = useState(initialFormState);\n\n\n\tfunction handleChange(event) {\n        const {name, value} = event.target;\n        setFormState({...formState, [name]: value, publicBookshelf: appendToPubShelf._id})\n\n\t}\n\n\n\tfunction handleSubmit(event) {\n        event.preventDefault()\n\t\t//setFormState(newShelf)\n\t\treturn newPublicShelf(formState)\n\t\t.then(shelf => {appendToPubShelf.shelves = {...appendToPubShelf.shelves, shelf}; updateUser()})\n\t\t.catch(err => console.log(err))\n        \n\t}\n\n\n\treturn (\n\t\t<div>\n\t\t\t<h1>Create Shelf: </h1>\n\t\t\t<form onSubmit={handleSubmit} className='new-shelf-form'>\n\t\t\t\t<label>Name: </label>\n\t\t\t\t<input type='text' name='name' placeholder='Name your new shelf' value={formState.name} onChange={handleChange} required />\n\t\t\t\t<button className='button__submit' type='submit'>\n\t\t\t\t\tSubmit\n\t\t\t\t</button>\n\t\t\t</form>\n\n\t\t</div>\n\t);\n}\n\nexport default CreatePublicShelf;","import React, { useEffect, useState } from 'react';\nimport Default from \"../../images/default.jpeg\"\nimport \"../../App.css\"\nimport { movePrivate, movePublic } from '../../services/shelves.services';\nimport { editEbook } from '../../services/ebook.services';\nimport { deleteEbook } from '../../services/ebook.services';\nimport { deleteBook } from '../../services/shelves.services';\nimport { Link } from 'react-router-dom';\n\n//actions private: movePrivate, delete, edit\n//actions public: movePublic, delete\n\nfunction BookEbook(props) {\n\t//const {book} = props\n\tconst shelves = props.bookshelf.shelves;\n\tconst book = props.book\n\tconst {updateUser} = props\n\n\tfunction action(bsType, toDo, args) {\n\t\tconst {bookId} = args;\n\t\tconsole.log(toDo)\n\n\t\tif(bsType === \"public\") {\n\t\t\tif (toDo === \"delete\") {return deleteBook(props.shelf, bookId)}\n\t\t\telse {return movePublic(args)}\n\t\t}\n\t\telse {\n\t\t\tif (toDo === \"delete\") {return deleteEbook(bookId)}\n\t\t\telse if (toDo === \"edit\") {console.log(\"edit\")}\n\t\t\telse {return movePrivate(args)}\n\t\t}\n\t}\n\n\n\tfunction style(cover) {\n\t\treturn {\n\t\tbackgroundImage: `url(${cover})`,\n\t\tbackgroundRepeat: \"no-repeat\",\n\t\tbackgroundPosition: \"center\",\n\t\tbackgroundSize: \"cover\"\n\t\t}\n\t}\n\n\tfunction eBookReader(book) {\n\t\tif(book.ebookUrl) return (\n\t\t<Link to={`/reader/${book._id}`} target=\"blank\" className=\"link-tag\" style={{position: \"absolute\", top: 0, right: 0, bottom: 0, left: 0, width: \"100%\", height: \"100%\"}}></Link>\n\t\t)\n\t}\n\n\tfunction coverFlip(book) {\n\n\t\tif(book.ebookUrl) {return (\n\t\t\t<div className=\"flip-card\">\n  \t\t\t\t<div className=\"flip-card-inner\">\n\t\t\t\t\t<div className=\"book-cover flip-card-front\" key={book.coverUrl} style={book.coverUrl ? style(book.coverUrl) : style(Default)} \t\talt=\"book cover\"></div>\n    \t\t\t\t<div className=\"flip-card-back\">\n\t\t\t\t\t\t{eBookReader(book)}\n    \t\t\t\t</div>\n  \t\t\t\t</div>\n\t\t\t</div>\n\t\t)}\n\t\telse { return (\n\t\t\t<div className=\"book-cover\" style={book.coverUrl ? style(book.coverUrl) : style(Default)} alt=\"book cover\"></div>\n\t\t)}\n\n\t}\n\n/* \n    function checkThumbnailExists(book) {\n\t\tif (book.coverUrl) { return (\n\t\t<div className=\"book-cover\" key={book.coverUrl} style={style(book.coverUrl)} alt=\"book cover\">\n\t\t{eBookReader(book)}\n\t\t</div>)} \n\t\telse {return (\n\t\t<div className=\"book-cover\" style={style(Default)} alt=\"book cover\">\n\t\t{eBookReader(book)}\n\t\t</div>)}\n\t}\n */\n\n\treturn (\n        <div key={book._id}  className=\"book\">\n\t        <div className=\"book-top\">\n\t              { coverFlip(book) }\n\t            <div className=\"book-shelf-changer\">\n\t                <select onChange={(event) => action(props.bsType, event.target.value, {shelfFrom: props.shelf, shelfTo: event.target.value, bookId: book._id}).then(res => res.status === true ? updateUser() : console.log(res))}>\n\t\t\t\t\t<optgroup label=\"Move to:\"></optgroup>\n\t                  {shelves.map(shelf => <option value={shelf._id}>{shelf.name}</option>)}\n\t\t\t\t\t<optgroup label=\"--------\"></optgroup>\n\t                  <option value=\"delete\" >Delete</option>\n\t\t\t\t\t  {(props.bsType === \"private\") && <option value=\"edit\">Edit</option>}\n\t                </select>\n\t            </div>\n\t        </div>\n\t        <div className=\"book-title\" key={book.title}>{book.title}</div>\n\t        <div className=\"book-author\" key={book.author}>{book.author}</div>\n        </div>\n\t); \n};\n\nexport default BookEbook;\n","import React, { useEffect, useState } from 'react'\nimport { Link } from 'react-router-dom'\nimport * as paths from \"../../utils/paths\"\nimport \"../../App.css\"\nimport BookEbook from '../../components/Book/BookEbook'\nimport { movePublic } from '../../services/shelves.services'\n\nfunction PublicBookShelf(props) {\n\n    const { publicShelf } = props\n    const {updateUser} = props\n    console.log(publicShelf)\n\n\n    const [bookshelfState, setState] = useState(publicShelf)\n\n    useEffect(() => {\n        setState(publicShelf)\n    }, [publicShelf])\n\n\n    return (\n   \t \n         <div className=\"list-books\">\n          <div className=\"list-books-title\">\n            <h1>MyReads</h1>\n              {bookshelfState.shelves && bookshelfState.shelves.length > 0 && bookshelfState.shelves.map(shelf => {\n              return(\n                <div key={shelf._id} className=\"bookshelf\">\n                  <h3>{shelf.name}</h3>\n\t                <div className=\"bookshelf-books\">\n\t                  <ol className=\"books-grid\">\n                      {shelf.books && shelf.books.map(eachBook => \n                          <BookEbook book={eachBook} user={props.user} bsType=\"public\" updateUser={updateUser} bookshelf={publicShelf} shelf={shelf._id} />\n                      )}\n                    </ol>\n                  </div>\n                </div>  \n              )\n            })}\n\n\n\n{/* \n\n\n            <h4>Currently Reading</h4>\n             {bookshelfState.currentlyReading && bookshelfState.currentlyReading.map(eachBook => {\n              return(\n                <div key={eachBook._id}>\n                  <img src={eachBook.coverUrl} alt=\"BookImg\" />\n                  <Link to={`/details/${eachBook._id}`}>{eachBook.title}</Link>\n                  <a href={eachBook.olLink} target=\"_blank\" rel=\"noreferrer\">Go to Open Library</a>\n                  <div className=\"open-search\">\n                  <Link to=\"/search\">Add a book</Link>\n                  </div>\n                </div>\n              )\n            })}\n            <h4>Want to Read</h4>\n              {bookshelfState.wantToRead && bookshelfState.wantToRead.map(eachBook => {\n              return(\n                <div key={eachBook._id}>\n                  <img src={eachBook.coverUrl} alt=\"BookImg\" />\n                  <Link to={`/details/${eachBook._id}`}>{eachBook.title}</Link>\n                  <a href={eachBook.olLink} target=\"_blank\" rel=\"noreferrer\">Go to Open Library</a>\n                  <div className=\"open-search\">\n                  <Link to=\"/search\">Add a book</Link>\n                  </div>\n                </div>\n              )\n            })}\n            <h4>Read</h4>\n            {bookshelfState.read && bookshelfState.read.map(eachBook => {\n              return(\n                <div key={eachBook._id}>\n                  <img src={eachBook.coverUrl} alt=\"BookImg\" />\n                  <Link to={`/`}>{eachBook.title}</Link>\n                  {/* option to review, drop down review \n                  <div className=\"open-search\">\n                  <Link to=\"/search\">Add a book</Link>\n                  </div>\n                </div>\n              )\n            })}\n\n            {bookshelfState.dynamicShelves && bookshelfState.dynamicShelves.length > 0 && bookshelfState.dynamicShelves.map(shelf => {\n              return(\n                <div key={shelf._id}>\n                  <h3>{shelf.name}</h3>\n                  {shelf.books && shelf.books.map(eachBook => {\n                  return(\n                    <div key={eachBook._id}>\n                      <img src={eachBook.coverUrl} alt=\"BookImg\" />\n                      <Link to={`/details/${eachBook._id}`}>{eachBook.title}</Link>\n                      <a href={eachBook.olLink} target=\"_blank\" rel=\"noreferrer\">Go to Open Library</a>\n                    </div>\n                )\n            })}\n                </div>\n              )\n            })}\n\n */}\n         {/*    <button className = \"info-button\" onClick = {showForm}>Add a new shelf</button> */}\n\n          </div>\n\n        </div>\n\n     )\n\n}\n\n\nexport default PublicBookShelf;\n\n","import React, { useEffect, useState } from 'react'\nimport { Link } from 'react-router-dom'\nimport CreatePrivateShelf from '../../components/PrivateShelves/NewDynamicShelf'\nimport BookEbook from '../../components/Book/BookEbook'\nimport { movePrivate } from '../../services/shelves.services'\n\nfunction PrivateBookShelf(props) {\n\n    const { privateShelf } = props\n    const {updateUser} = props\n\n\n    const [bookshelfState, setState] = useState(privateShelf)\n\n    useEffect(() => {\n        setState(privateShelf)\n    }, [privateShelf])\n\n\n    return (\n   \t \n         <div className=\"list-books\">\n          <div className=\"list-books-title\">\n            <h1>MyEbooks</h1>\n            <Link to=\"/ebook/create\">Add an ebook</Link>\n              {bookshelfState.shelves && bookshelfState.shelves.length > 0 && bookshelfState.shelves.map(shelf => {\n              return(\n                <div key={shelf._id} className=\"bookshelf\">\n                  <h3>{shelf.name}</h3>\n\t                <div className=\"bookshelf-books\">\n\t                  <ol className=\"books-grid\">\n                      {shelf.ebooks && shelf.ebooks.map(eachBook => \n                          <BookEbook book={eachBook} user={props.user} bsType=\"private\" bookshelf={privateShelf} shelf={shelf._id} updateUser={updateUser} />\n                      )}\n                    </ol>\n                  </div>\n                </div>  \n              )\n            })}\n\n          </div>\n\n        </div>\n\n     )\n\n}\n\n\nexport default PrivateBookShelf;","import React, {useEffect, useState} from 'react';\nimport { getLoggedIn, logout } from '../services/auth';\nimport * as CONSTS from '../utils/consts';\nimport CreatePrivateShelf from '../components/PrivateShelves/NewDynamicShelf';\nimport CreatePublicShelf from '../components/PublicShelves/NewDynamicPubShelf';\nimport PublicBookshelf from '../pages/publicBS/PublicBookShelf.page';\nimport PrivateBookshelf from '../pages/privateBS/PrivateBookshelf.page';\n\n\nfunction UserBookShelves(props){\n    const {user, setUser} = props;\n    \n    const initalState = {username: '', publicBookshelf: {}, privateBookshelf: {}, reviews: []}\n\n    /* const username = user.username\n    const publicBookshelf = user.publicBookshelf\n    const privateBookshelf = user.privateBookshelf\n    const reviews = user.reviews */\n    const [username, setUsername] = useState(user.username)\n    const [publicBookshelf, setPublicBookshelf] = useState(user.publicBookshelf)\n    const [privateBookshelf, setPrivateBookshelf] = useState(user.privateBookshelf)\n    const [reviews, setReviews] = useState(user.reviews)\n    const [publicShelves, setPublicBS] = useState()\n    const [privateShelves, setPrivateBS] = useState()\n\n\n    useEffect(() => {\n        updateUser()\n    }, [])\n\n    function updateUser() {\n        const accessToken = localStorage.getItem(CONSTS.ACCESS_TOKEN);\n\t\tif (!accessToken) {\n\t\t}\n\t\tgetLoggedIn(accessToken).then((res) => {\n\t\t\tif (!res.data) {\n\t\t\t\tconsole.log('RES IN CASE OF FAILURE', res);\n\t\t\t} else {\n\t\t\t\t//setUser(res.data.user)\n                setPrivateBookshelf(res.data.user.privateBookshelf)\n                setPublicBookshelf(res.data.user.publicBookshelf)\n                setPublicBS(res.data.user.publicBookshelf.shelves)\n                setPrivateBS(res.data.user.privateBookshelf.shelves)\n\t\t\t}\n\t\t});\n    }\n\n    return (\n            <div>\n                <h2>My Bookshelves</h2>\n                <h4>Private Bookshelf</h4>\n                <PrivateBookshelf privateShelf={privateBookshelf} user={user} updateUser={updateUser}/>\n                <CreatePrivateShelf appendToShelf={privateBookshelf} updateUser={updateUser} />\n                <br/>\n                <h4>Public Bookshelf</h4>\n                <PublicBookshelf publicShelf={publicBookshelf} user={user} updateUser={updateUser}/>\n                <CreatePublicShelf appendToPubShelf={publicBookshelf} updateUser={updateUser} />\n            </div>\n    )\n};\n\nexport default UserBookShelves;\n\n\n\n\n\n// DISPLAY STATIC SHELVES BY ID (PUBLIC AND PRIVATE)\n// should be able to get id from the user profile who has shelves attached to it\n/* // PRIVATE = 1 static shelf, option to add dynamic shelves\n// PRIVATE: array of ebook ids - starts empty and created on signup - if (staticShelf.length === 0)\nreturn <p>Your Bookshelf is Empty</p>\n<img> - something cute/ funny\nButton to add books - takes you to search books page\n\nELSE call the data from the backend - should have been added to the backend when we add it to our array model, map through the data and show the names<p>*/\n\n\n// to get the shelf info go to find book\n\n\n\n    // potentially needs a function  to make this work = if private shelf and either shelf empty do this, if full load and map through, else if public do this etc.\n    // may need to call functions to get the indivuidal bookshelves i.e. from the bookshelves services page\n\n\n\n\n// if any public or private bookshelves exist, get data and map through it\n// if dynamic bookshelf exists, get data and map through\n\n\n/* import React, {useEffect, useState} from 'react';\nimport {Link} from 'react-router-dom'\nimport {displayUserBookshelves} from '../services/auth'\nimport CreatePrivateShelf from './Components/PrivateShelves/DynamicShelf';\nimport books from '../../public/bookImg'\n\n */\n//GET\n/* \nfunction UserBookShelves(props){\n    const {userId} = props;\n    \n    const initalState = {username: '', publicBookshelf: {}, privateBookshelf: {}, reviews: []}\n    \n    const [userBookshelfState, setUserBookshelfState] = useState(initalState)\n\n\n    \n    useEffect(()=>{\n        displayUserBookshelves(userId)\n        .then ((userBookshelves)=> setUserBookshelfState(userBookshelves))\n        .catch(err => console.log(err))\n    }, []);\n\n */\n\n/*         return (\n            <div>\n                <h4>Private Bookshelf</h4>\n                <CreatePrivateShelf /> */\n\n      {/*           create logic for private shelves and logic for public shelves and call in here \n      pass public and private bookshelves as props*/}\n/*                 <h2>Searched Books</h2>\n                {listBooks.map(oneBook =>{\n                return(\n                    <div key={oneBook.title}>\n                        <h4>{oneBook.title}</h4> */\n{/*                         <Link to={`/books/${bookArray.data.docs._id}`}>{bookArray.data.docs.name}</Link> */}\n/*                     </div>\n                )\n            })}\n        </div>\n        )\n\n};\n\nexport default UserBookShelves; */\n\n\n\n\n\n\n// PUBLIC = 3 static shelves, option to add dynamic shelves\n\n\n\n\n\n// DISPLAY DYNAMIC SHELVES\n// drop down form to add new dynamic shelves\n\n\n/* \nfunction privateBookshelfStatus() {\n    const {staticShelf, dynamicShelves} = req.body.privateBookshelf\n\n    if (staticShelf.length === 0) {\n        return (\n            <div>\n                <p>Your Bookshelf is Empty</p>\n                <img src={books} alt=\"booksImg\" />\n                <button><Link to=\"/ebooks/create\">Add an ebook</Link></button>\n            </div>\n\n            /* this could then needs to have another condition if it's full OR if dynamic shelves exist \n\n        )}\n}\n\nfuntion publicBookshelfStatus(){\n    const {currentlyReading, wantToRead, read, dynamicShelves} = req.body.publicBookshelf\n   \n    if (currentlyReading.length === 0 || wantToRead.length === 0 || read.length === 0) {\n\n        return (\n            <div>\n                <p>Your Bookshelf is Empty</p> {/* need to return dynamically for specific bookshelf }\n                <img src={books} alt=\"booksImg\" />\n                <button><Link to=\"/ebooks/create\">Add an ebook</Link></button>\n            </div>\n    )}\n\n} */\n\n\n// option to change background?","import axios from 'axios';\n\n\n\n\nfunction internalServerError(err) {\n\treturn {\n\t\tstatus: false,\n\t\terrorMessage: 'Internal server error. Please check your server'\n\t};\n}\n\nfunction successStatus(res) {\n\treturn {\n\t\tstatus: true,\n\t\tdata: res.data\n\t};\n}\n\nconst service = axios.create({\n\tbaseURL: `${process.env.REACT_APP_SERVER_URL}/reviews`\n});\n\n\nexport function createReview(form) {\n\tconst {bookId, owner, comment, rating} = form\n\n    return service.post(`/${bookId}/new-review`, {owner, comment, rating})\n    .then(successStatus)\n    .catch(internalServerError)\n\n}\n\n\nexport function allReviews(bookId) {\n\n    return service.get(`/${bookId}/reviews`)\n    .then(successStatus)\n    .catch(internalServerError)\n\n}","import React, { useEffect, useState } from 'react'\nimport { Link } from 'react-router-dom'\nimport { getUser } from '../../services/auth'\nimport {createReview} from '../../services/review.services'\nimport \"./Review.css\"\n\n//const [userState, setUser] = useState({})\n//\tuseEffect(() => {getUser().then(result => setUser(result))}, [])\n// useEffect(() => {setFormState({...formState, owner: userState._id}) ; console.log(\"userState from review: \", userState)}, [userState])\n// CREATE NEW REVIEW\n\nfunction NewReview(props) {\n\tconst {bookId} = props.match.params\n\tconst {user} = props\n\n\tconst initialFormState = {\n\t\towner: user._id,\n\t\tcomment: \"\",\n\t\tbookId: bookId,\n\t\trating: null\n\t};\n\n\n\tconst [formState, setFormState] = useState(initialFormState);\n\n\n\n\tfunction handleChange(event) {\n        const {name, value} = event.target;\n        setFormState({...formState, [name]: value})\n\n\t}\n\n\tfunction handleSubmit(event) {\n\t\tevent.preventDefault()\n\t\treturn createReview(formState)\n\t\t.then(review => console.log(\"review submitted: \", review))\n\t\t.catch(err => console.log(err))\n\n\t}\n\n\n\tfunction ratingSelect(event) {\n\t\tsetFormState({...formState, rating: event.target.value})\n\t}\n\n\n\t//useEffect(() => {console.log(\"form: \", formState)}, [userState])\n\n\n\t//console.log(\"user: \", props.user ? props.user._id : \"nope\")\n\t//{setFormState({...formState, owner: props.user._id})}\n\n\n\n\n\n\t\n\treturn (\n\t\t<div>\n\t\t\t<h1>Book review: </h1>\n\t\t\t<div className=\"container p-3\">\n  \t\t\t\t<form onSubmit={handleSubmit} className=\"row\">\n \n      \t\t\t\t<div className=\"stars text-reviewCenter\">\n      \t\t\t\t\t<div className=\"col-md-12\">\n          \t\t\t\t\t<div className=\"form-group\">\n \n            \t\t\t\t\t<input onClick={ratingSelect} type=\"radio\" id=\"five\" name=\"rate\" value=\"5\"/>\n            \t\t\t\t\t<label htmlFor=\"five\"></label>\n            \t\t\t\t\t<input onClick={ratingSelect} type=\"radio\" id=\"four\" name=\"rate\" value=\"4\" />\n            \t\t\t\t\t<label htmlFor=\"four\"></label>\n            \t\t\t\t\t<input onClick={ratingSelect} type=\"radio\" id=\"three\" name=\"rate\" value=\"3\"/>\n            \t\t\t\t\t<label htmlFor=\"three\"></label>\n            \t\t\t\t\t<input onClick={ratingSelect} type=\"radio\" id=\"two\" name=\"rate\" value=\"2\"/>\n            \t\t\t\t\t<label htmlFor=\"two\"></label>\n            \t\t\t\t\t<input onClick={ratingSelect} type=\"radio\" id=\"one\" name=\"rate\" value=\"1\" />\n            \t\t\t\t\t<label htmlFor=\"one\"></label>\n \n            \t\t\t\t\t<span className=\"result\"></span>\n \n          \t\t\t\t\t</div>\n        \t\t\t\t</div>\n      \t\t\t\t</div>\n      \t\t\t\t<div className=\"col-md-6\">\n        \t\t\t\t<div className=\"form-group\">\n          \t\t\t\t\t<label htmlFor=\"textarea\"><b>Review:</b></label>\n \n          \t\t\t\t\t<textarea value={formState.comment} name=\"comment\" onChange={handleChange} required className=\"form-control\" id=\"textarea\" rows=\"4\" placeholder=\"What did you think of this book?\"></textarea>\n        \t\t\t\t</div>\n      \t\t\t\t</div>\n      \t\t\t\t<div className=\"col-md-12 text-right\">\n        \t\t\t\t<button type=\"submit\" className=\"btn btn-primary\">Review</button>\n      \t\t\t\t</div>\n  \t\t\t\t</form>\n\t\t\t</div>\n\t\t</div>\n\t);\n} \n\nexport default NewReview;","\n// get details by book id and display\n\nimport React, {useEffect, useState} from 'react';\nimport {Link} from 'react-router-dom'\nimport {getOneBook} from '../../services/api.services'\nimport NewReview from '../Reviews/NewReview'\nimport {allReviews} from '../../services/review.services'\n\n\nfunction BookDetails(props){\n    const {olid} = props; //? is this the user that I am actually getting through props\n    // not getting the correct data \n    \n    const [bookState, setBookState] = useState({})\n    const [reviewState, setReviewState] = useState([])\n\n\n    useEffect(()=>{\n        getOneBook(olid)\n        .then ((book)=> console.log('This is coming through the use effect', book.data))//setBookState(book.data))\n    \n        .then (() => allReviews(olid)\n        .then(dbReviews => setReviewState(dbReviews)))\n        \n        .catch(err => console.log(err))\n    }, []);\n\n    // map the array of reviews \n    // same as creating a bookshelf, update the state in here\n\n       return (\n            <div className=\"single-book\">\n                <h2>Book details</h2>\n                <h4>{bookState.title}</h4>\n                <h6>{bookState.author}</h6>\n                <img src={bookState.coverUrl} alt=\"BookImg\" />\n                <Link to='/ol link should be here'></Link>\n                <NewReview book= {olid}/>\n                <h4>All Reviews:</h4>\n                <div>\n                    {reviewState.comment && reviewState.comment.map(eachComment => {\n                        console.log('this is the current comment', eachComment)\n                        return(\n                        <div key={eachComment._id}>\n                            <h2>{eachComment.owner}</h2>\n                            <p>{eachComment.comment}</p>\n                            <Link to={`/`}>{eachComment.comment}</Link>\n                        </div>\n                        )\n                    })}\n\n                </div>\n        \n            </div>\n        )\n};\n\nexport default BookDetails;","import { useState, useEffect } from \"react\";\nimport {\n    EpubView, // Underlaying epub-canvas (wrapper for epub.js iframe)\n    EpubViewStyle, // Styles for EpubView, you can pass it to the instance as a style prop for customize it\n    ReactReader, // A simple epub-reader with left/right button and chapter navigation\n    ReactReaderStyle // Styles for the epub-reader it you need to customize it\n  } from \"react-reader\";\nimport { getEbookDetails } from \"../../services/ebook.services\";\n\n\n\nfunction Reader(props){\n\n    const {ebookId} = props.match.params\n    console.log(\"eBookId\", ebookId)\n\n    const [ebook, setEbook] = useState(\"\")\n\n    useEffect(() => {getEbookDetails(ebookId).then(res => {\n        console.log(res.data);\n        setEbook(res.data)\n    })}, [])\n\n\n    return (\n        \n        <div style={{height: \"100vh\" }}>\n            <div style={{ position: \"relative\", height: \"100%\" }}>\n              {\" \"}\n              <ReactReader\n                url={ebook.ebookUrl}\n                title={ebook.title}\n                location={\"epubcfi(/6/2[cover]!/6)\"}\n                locationChanged={epubcifi => console.log(epubcifi)}\n              />\n            </div>\n        </div>\n    );\n    \n}\n\nexport default Reader","import React, { useState, useEffect } from 'react';\nimport { Switch } from 'react-router-dom';\nimport Navbar from './components/Navbar/Navbar';\nimport CreateEbook from './pages/ebooks/CreateEbook.page';\nimport LogIn from './pages/authPages/LogIn.page';\nimport Search from './pages/search/Search.page';\nimport Signup from './pages/authPages/Signup';\nimport NormalRoute from './routing-components/NormalRoute';\nimport ProtectedRoute from './routing-components/ProtectedRoute';\nimport { getLoggedIn, logout, getUser } from './services/auth';\nimport * as CONSTS from './utils/consts';\nimport NewDynamicShelf from './components/PrivateShelves/NewDynamicShelf'\nimport UserProfile from './pages/UserProfile.page';\nimport Test from './components/Test';\nimport {displayUserPage} from \"./services/auth\"\nimport BookDetails from './components/Book/BookDetails'\nimport Reader from './pages/ebooks/Read.page';\nimport \"./App.css\";\nimport \"./components/Navbar/Navbar.css\"\nimport HomePage from './pages/Home.page'\nimport NewReview from './components/Reviews/NewReview';\n\n\n\nfunction App() {\n \n/*  \tlet token = localStorage.getItem(CONSTS.ACCESS_TOKEN) || null\n\tlet testUser;\n\n\tif(token) {\n\t\tgetLoggedIn(token).then((res) => {\n\t\tconsole.log(res);\n\t\tif (!res.data) {\n\t\t\tconsole.log('RES IN CASE OF FAILURE', res);\n\t\t\tsetUser(null);\n\t\t} else {\n\t\t\ttestUser = res.data.user;\n\t\t}\n\t});} \n  */\n\tconst [user, setUser] = useState(null);\n \n\n  \tuseEffect(() => {\n\t\tconst accessToken = localStorage.getItem(CONSTS.ACCESS_TOKEN);\n\t\tif (!accessToken) {\n\t\t\tsetUser(null);\n\t\t}\n\t\tgetLoggedIn(accessToken).then((res) => {\n\t\t\tif (!res.data) {\n\t\t\t\tconsole.log('RES IN CASE OF FAILURE', res);\n\t\t\t\tsetUser(null);\n\t\t\t} else {\n\t\t\t\tsetUser(res.data.user)\n\t\t\t}\n\t\t});\n\t}, []);\n   \n\tconst handleLogout = () => {\n\t\tconst accessToken = localStorage.getItem(CONSTS.ACCESS_TOKEN);\n\t\tif (!accessToken) {\n\t\t\tsetUser(null);\n\t\t}\n\t\tlogout(accessToken).then((res) => {\n\t\t\tif (!res.status) {\n\t\t\t\tconsole.error(' SOMETHING HAPPENED THAT HAS TO DEALT WITH', res);\n\t\t\t}\n\n\t\t\tlocalStorage.removeItem(CONSTS.ACCESS_TOKEN);\n\t\t\tsetUser(null);\n\t\t});\n\t};\n\n \tconst authenticate = (user) => {\n\t\tconsole.log(user)\n\t\tsetUser(user);\n\t};\n \n\tconsole.log(\"user: \", user)\n\n\treturn (\n\t\t<div className='App'>\n\t\t\t<Navbar handleLogout={handleLogout} \n\t\t\tcomponent ={Navbar}\n\t\t\tuser={user} />\n\n\t\t\t<Switch>\n\t\t\t\t<NormalRoute \n\t\t\t\t\texact\n\t\t\t\t\tpath={'/'}\n\t\t\t\t\tauthenticate={authenticate}\n\t\t\t\t\tcomponent={HomePage}\n\t\t\t\t/>\n\n\t\t\t\t<NormalRoute\n\t\t\t\t\texact\n\t\t\t\t\tpath={'/'}\n\t\t\t\t\tuser={user}\n\t\t\t\t\tauthenticate={authenticate}\n\t\t\t\t\tcomponent={HomePage}\n\t\t\t\t/>\n\t\t\t\t<NormalRoute\n\t\t\t\t\texact\n\t\t\t\t\tpath={'/auth/signup'}\n\t\t\t\t\tuser={user}\n\t\t\t\t\tauthenticate={authenticate}\n\t\t\t\t\tcomponent={Signup}\n\t\t\t\t/>\n\t\t\t\t<NormalRoute\n\t\t\t\t\texact\n\t\t\t\t\tpath={'/auth/login'}\n\t\t\t\t\tuser={user}\n\t\t\t\t\tauthenticate={authenticate}\n\t\t\t\t\tcomponent={LogIn}\n\t\t\t\t/>\n\t\t\t\t<NormalRoute\n\t\t\t\t\texact\n\t\t\t\t\tpath={'/details/:bookId'}\n\t\t\t\t\tuser={user}\n\t\t\t\t\tcomponent={BookDetails}\n\t\t\t\t/>\n\t\t\t\t<ProtectedRoute\n\t\t\t\t\texact\n\t\t\t\t\tpath={'/review/:bookId'}\n\t\t\t\t\tuser={user}\n\t\t\t\t\tcomponent={NewReview}\n\t\t\t\t/>\n\t\t\t\t<ProtectedRoute\n\t\t\t\t\texact\n\t\t\t\t\tpath={'/search'}\n\t\t\t\t\tcomponent={Search}\n\t\t\t\t\tuser={user}\n\t\t\t\t/>\n\t\t\t\t<ProtectedRoute\n\t\t\t\t\texact\n\t\t\t\t\tpath={`/auth/profile/user`}\n\t\t\t\t\tcomponent={UserProfile}\n\t\t\t\t\tuser={user}\n\t\t\t\t\tsetUser={setUser}\n\t\t\t\t/>\n\t\t\t\t<ProtectedRoute\n\t\t\t\t\texact\n\t\t\t\t\tpath={'/ebook/create'}\n\t\t\t\t\tcomponent={CreateEbook}\n\t\t\t\t\tuser={user}\n\t\t\t\t/>\n\t\t\t</Switch>\n\t\t</div>\n\t);\n}\n\nexport default App;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport \"./index.css\";\nimport App from \"./App\";\nimport { BrowserRouter, Switch, Route} from \"react-router-dom\";\nimport Reader from \"./pages/ebooks/Read.page\";\n\nReactDOM.render(\n  <React.StrictMode>\n    <BrowserRouter>\n      <Switch>\n        <Route exact path={'/reader/:ebookId'} component={Reader}/>\n        <App />\n      </Switch>\n    </BrowserRouter>\n  </React.StrictMode>,\n  document.getElementById(\"root\")\n);\n"],"sourceRoot":""}